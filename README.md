[![Go Reference][goreference_badge]][goreference_link]
[![Go Report Card][goreportcard_badge]][goreportcard_link]

# <div align="center">Echidna Library for Go</div>

![background image](echidna.png)

WARNING: this library is under heavy development, hence the API is subject to
change

### <a name="top"></a>
### <div align="center">Table of Contents</div>

* [1. Overview](#overview)
* [2. logger](#logger)
* [3. observable](#observable)
* [4. program](#programme)
* [5. set](#set)
* [6. stack](#stack)
* [7. terminator](#terminator)

# <a name="overview">1. Overview</a>

[goreference_badge]: https://pkg.go.dev/badge/github.com/bruceesmith/echidna/v3.svg
[goreference_link]: https://pkg.go.dev/github.com/bruceesmith/echidna
[goreportcard_badge]: https://goreportcard.com/badge/github.com/bruceesmith/echidna
[goreportcard_link]: https://goreportcard.com/report/github.com/bruceesmith/echidna
<!-- Code generated by gomarkdoc. DO NOT EDIT -->


```go
import "github.com/bruceesmith/echidna"
```

Package echidna provides sub\-packages for building robust Go daemons and CLIs

- logger supports logging and tracing based on the standard library package [log/slog](<https://pkg.go.dev/log/slog/>).

- observable is an implementation of the [Gang of Four](<https://en.wikipedia.org/wiki/Design_Patterns>) [observer](<https://en.wikipedia.org/wiki/Observer_pattern>) pattern, useful in event\-driven programs such as GUIs.

- program builds upon the Github packages [knadh/koanf](<https://github.com/knadh/koanf>) and [urfave/cli/v3](<https://github.com/urfave/cli>) to make it extremely simple to use the features of those two excellent packages in concert.

- set defines goroutine\-safe methods for manipulating a generic [set](<https://en.wikipedia.org/wiki/Set_(abstract_data_type)>) data structure via the standard operations Add, Contains, Intersection, Members, String and Union.

- stack defines goroutine\-safe methods for manipulating a generic [stack](<https://en.wikipedia.org/wiki/Stack_(abstract_data_type)>) data structure via the standard operations IsEmpty, Peek, Pop, Push and Size.

- terminator permits orderly stopping / shutdown of a group of goroutines via methods which mimic a [sync.WaitGroup](<https://pkg.go.dev/sync/#WaitGroup>). There is a default \[terminator.Terminator\] accessible through top level functions \(Add, Done, Wait and so on\) that call the corresponding Terminator methods.

Refer to the documentation for the individual packages for more details.

## Index

- [Variables](<#variables>)


## Variables

<a name="BuildDate"></a>

```go
var (
    // BuildDate is the timestamp for when this program was compiled
    BuildDate string = `Filled in during the build`
)
```

# <a name="logger">2. logger</a>

```go
import "github.com/bruceesmith/echidna/logger"
```

Package logger supports logging and tracing based on the standard library package slog.

Debug, Error, Info and Warn operate like their package slog equivalents, with the level of logging modifiable using SetLevel.

A custom logging level \(LevelTrace\) can be supplied to SetLevel to enable tracing. Tracing can be unconditional when calling Trace, or only enabled for pre\-defined identifiers when calling TraceID. Identifiers for TraceID are registered by calling SetTraceIDs.

By default, all debug, error, info and warn messages go to Stdout, and traces go to Stderr; these destinations can be changed by calling RedirectNormal and RedirectTrace respectively.

When used in [cli applications](<https://github.com/urfave/cli>), a cli.Flag representing a LogLevel can be provided using the LogLevelFlag type.

## Index

- [func Debug\(msg string, args ...any\)](<#Debug>)
- [func Error\(msg string, args ...any\)](<#Error>)
- [func Info\(msg string, args ...any\)](<#Info>)
- [func Level\(\) string](<#Level>)
- [func RedirectStandard\(w io.Writer\)](<#RedirectStandard>)
- [func RedirectTrace\(w io.Writer\)](<#RedirectTrace>)
- [func SetFormat\(f Format\)](<#SetFormat>)
- [func SetLevel\(l slog.Level\)](<#SetLevel>)
- [func SetTraceIds\(ids ...string\)](<#SetTraceIds>)
- [func Trace\(msg string, args ...any\)](<#Trace>)
- [func TraceID\(id string, msg string, args ...any\)](<#TraceID>)
- [func Warn\(msg string, args ...any\)](<#Warn>)
- [type Format](<#Format>)
- [type LogLevel](<#LogLevel>)
  - [func \(ll \*LogLevel\) Set\(ls string\) \(err error\)](<#LogLevel.Set>)
  - [func \(ll \*LogLevel\) String\(\) \(s string\)](<#LogLevel.String>)
  - [func \(ll \*LogLevel\) Type\(\) string](<#LogLevel.Type>)
  - [func \(ll \*LogLevel\) UnmarshalJSON\(jason \[\]byte\) \(err error\)](<#LogLevel.UnmarshalJSON>)
- [type LogLevelFlag](<#LogLevelFlag>)
- [type Traces](<#Traces>)
  - [func \(t \*Traces\) Set\(ts string\) \(err error\)](<#Traces.Set>)
  - [func \(t \*Traces\) String\(\) \(s string\)](<#Traces.String>)
  - [func \(t \*Traces\) Type\(\) string](<#Traces.Type>)


<a name="Debug"></a>
## func [Debug](<https://github.com/bruceesmith/echidna/blob/main/logger/logger.go#L92>)

```go
func Debug(msg string, args ...any)
```

Debug emits a debug log

<a name="Error"></a>
## func [Error](<https://github.com/bruceesmith/echidna/blob/main/logger/logger.go#L97>)

```go
func Error(msg string, args ...any)
```

Error emits an error log

<a name="Info"></a>
## func [Info](<https://github.com/bruceesmith/echidna/blob/main/logger/logger.go#L102>)

```go
func Info(msg string, args ...any)
```

Info emits an info log

<a name="Level"></a>
## func [Level](<https://github.com/bruceesmith/echidna/blob/main/logger/logger.go#L106>)

```go
func Level() string
```



<a name="RedirectStandard"></a>
## func [RedirectStandard](<https://github.com/bruceesmith/echidna/blob/main/logger/logger.go#L111>)

```go
func RedirectStandard(w io.Writer)
```

RedirectStandard changes the destination for normal \(non\-trace\) logs

<a name="RedirectTrace"></a>
## func [RedirectTrace](<https://github.com/bruceesmith/echidna/blob/main/logger/logger.go#L122>)

```go
func RedirectTrace(w io.Writer)
```

RedirectTrace changes the destination for normal \(non\-trace\) logs

<a name="SetFormat"></a>
## func [SetFormat](<https://github.com/bruceesmith/echidna/blob/main/logger/logger.go#L133>)

```go
func SetFormat(f Format)
```

SetFormat changes the format of log entries

<a name="SetLevel"></a>
## func [SetLevel](<https://github.com/bruceesmith/echidna/blob/main/logger/logger.go#L147>)

```go
func SetLevel(l slog.Level)
```

SetLevel sets the default level of logging

<a name="SetTraceIds"></a>
## func [SetTraceIds](<https://github.com/bruceesmith/echidna/blob/main/logger/logger.go#L152>)

```go
func SetTraceIds(ids ...string)
```

SetTraceIds registers identifiers for future tracing

<a name="Trace"></a>
## func [Trace](<https://github.com/bruceesmith/echidna/blob/main/logger/logger.go#L159>)

```go
func Trace(msg string, args ...any)
```

Trace emits one JSON\-formatted log entry if trace level logging is enabled

<a name="TraceID"></a>
## func [TraceID](<https://github.com/bruceesmith/echidna/blob/main/logger/logger.go#L170>)

```go
func TraceID(id string, msg string, args ...any)
```

TraceID emits one JSON\-formatted log entry if tracing is enabled for the requested ID

<a name="Warn"></a>
## func [Warn](<https://github.com/bruceesmith/echidna/blob/main/logger/logger.go#L181>)

```go
func Warn(msg string, args ...any)
```

Warn emits a warning log

<a name="Format"></a>
## type [Format](<https://github.com/bruceesmith/echidna/blob/main/logger/logger.go#L38>)

Format determines the format of each log entry

```go
type Format string
```

<a name="LevelTrace"></a>

```go
const (
    // LevelTrace can be set to enable tracing
    LevelTrace slog.Level = -10
    // Text format
    Text Format = "text"
    // JSON format
    JSON Format = "json"
)
```

<a name="LogLevel"></a>
## type [LogLevel](<https://github.com/bruceesmith/echidna/blob/main/logger/loglevel.go#L16>)

LogLevel is the level of logging

```go
type LogLevel int
```

<a name="LogLevel.Set"></a>
### func \(\*LogLevel\) [Set](<https://github.com/bruceesmith/echidna/blob/main/logger/loglevel.go#L36>)

```go
func (ll *LogLevel) Set(ls string) (err error)
```

Set is a convenience method for pflag.Value

<a name="LogLevel.String"></a>
### func \(\*LogLevel\) [String](<https://github.com/bruceesmith/echidna/blob/main/logger/loglevel.go#L19>)

```go
func (ll *LogLevel) String() (s string)
```

String is a convenience method for pflag.Value

<a name="LogLevel.Type"></a>
### func \(\*LogLevel\) [Type](<https://github.com/bruceesmith/echidna/blob/main/logger/loglevel.go#L55>)

```go
func (ll *LogLevel) Type() string
```

Type is a conveniene method for pflag.Value

<a name="LogLevel.UnmarshalJSON"></a>
### func \(\*LogLevel\) [UnmarshalJSON](<https://github.com/bruceesmith/echidna/blob/main/logger/loglevel.go#L60>)

```go
func (ll *LogLevel) UnmarshalJSON(jason []byte) (err error)
```

UnmarshalJSON is a convenience method for Kong

<a name="LogLevelFlag"></a>
## type [LogLevelFlag](<https://github.com/bruceesmith/echidna/blob/main/logger/loglevel.go#L69>)

LogLevelFlag is useful for using a LogLevel as a command\-line flag in CLI applications

```go
type LogLevelFlag = cli.FlagBase[LogLevel, cli.NoConfig, logLevelValue]
```

<a name="Traces"></a>
## type [Traces](<https://github.com/bruceesmith/echidna/blob/main/logger/traces.go#L13>)

Traces is the list of trace IDs enabled

```go
type Traces []string
```

<a name="Traces.Set"></a>
### func \(\*Traces\) [Set](<https://github.com/bruceesmith/echidna/blob/main/logger/traces.go#L21>)

```go
func (t *Traces) Set(ts string) (err error)
```

Set is a convenience method for pflag.Value

<a name="Traces.String"></a>
### func \(\*Traces\) [String](<https://github.com/bruceesmith/echidna/blob/main/logger/traces.go#L16>)

```go
func (t *Traces) String() (s string)
```

String is a convenience method for pflag.Value

<a name="Traces.Type"></a>
### func \(\*Traces\) [Type](<https://github.com/bruceesmith/echidna/blob/main/logger/traces.go#L31>)

```go
func (t *Traces) Type() string
```

Type is a conveniene method for pflag.Value

# <a name="observable">3. observable</a>

```go
import "github.com/bruceesmith/echidna/observable"
```

Package observable is a simple generic implementation of the Observer design pattern.

Observables are identified by a string name which must be unique across an application. Calling the [observable/Observe](<https://pkg.go.dev/observable/Observe/>) function both registers an observable by name and type, but also registers an observer by providing a notification function that is invoked when the value of the observable changes. Multiple observers can call [observable/Observe](<https://pkg.go.dev/observable/Observe/>) to register for notifications concerning an existing observable; in this case, notification functions are called in the order in which they were registered.

To change the value of an observable, and to notify all observers by invoking their callback notification function, call the [observable/Set](<https://pkg.go.dev/observable/Set/>) function.

## Index

- [func Observe\[T any\]\(name string, cb func\(T\)\) error](<#Observe>)
- [func Set\[T any\]\(name string, value T\) error](<#Set>)


<a name="Observe"></a>
## func [Observe](<https://github.com/bruceesmith/echidna/blob/main/observable/observable.go#L33>)

```go
func Observe[T any](name string, cb func(T)) error
```

Observe either registers a new observable, or adds another observer \(notification function\) to an existing observable

<a name="Set"></a>
## func [Set](<https://github.com/bruceesmith/echidna/blob/main/observable/observable.go#L50>)

```go
func Set[T any](name string, value T) error
```

Set notifies all observers that the value of an observable has changed by calling all registered notification functions

# <a name="programme">4. program</a>

```go
import "github.com/bruceesmith/echidna/program"
```

Package program builds upon the Github packages knadh/koanf and urfave/cli/v3 to make it extremely simple to use the features of those two excellent packages in concert.

Every program using program will expose a standard set of command\-line flags \(\-\-json, \-\-log, \-\-trace, \-\-verbose\) in addition to the standard flags provided by urfave/cli/v3 \(\-\-help and \-\-version\).

If a configuration struct is provided to the Run\(\) function, then a further command=line flag \(\-\-config\) is added to provide the source\(s\) of values for fields in the struct.

<details><summary>Example (Action)</summary>
<p>



```go
// Include an Action function
(&cli.Command{
	Action: func(ctx context.Context, cmd *cli.Command) error {
		fmt.Println("hello")
		return nil
	},
	Name:    "action",
	Version: "1",
}).Run(context.Background(), []string{"action"})
// Output:
// hello
```

#### Output

```
hello
```

</p>
</details>

<details><summary>Example (Basic)</summary>
<p>



```go
// The most basic example of urfave/cli/v3
(&cli.Command{Name: "basic"}).Run(context.Background(), os.Args)
// Output:
// NAME:
//    basic - A new cli application
//
// USAGE:
//    basic [global options]
//
// GLOBAL OPTIONS:
//    --help, -h  show help
```

#### Output

```
NAME:
   basic - A new cli application

USAGE:
   basic [global options]

GLOBAL OPTIONS:
   --help, -h  show help
```

</p>
</details>

<details><summary>Example (Flag1)</summary>
<p>



```go
// Include a custom flag
(&cli.Command{
	Action: func(ctx context.Context, cmd *cli.Command) error {
		fmt.Println("hello")
		return nil
	},
	Flags: []cli.Flag{
		&cli.IntFlag{
			Name:  "i",
			Usage: "An integer",
		},
	},
	Name:    "action",
	Version: "1",
}).Run(context.Background(), []string{"action"})
// Output:
// hello
```

#### Output

```
hello
```

</p>
</details>

<details><summary>Example (Flag2)</summary>
<p>



```go
// Include a custom flag
(&cli.Command{
	Action: func(ctx context.Context, cmd *cli.Command) error {
		fmt.Println("hello")
		return nil
	},
	Flags: []cli.Flag{
		&cli.IntFlag{
			Name:  "i",
			Usage: "An integer",
			Value: 22,
		},
	},
	Name:    "action",
	Version: "1",
}).Run(context.Background(), []string{"action", "--help"})
// Output:
// NAME:
//    action - A new cli application
//
// USAGE:
//    action [global options]
//
// VERSION:
//    1
//
// GLOBAL OPTIONS:
//    -i value       An integer (default: 22)
//    --help, -h     show help
//    --version, -v  print the version
```

#### Output

```
NAME:
   action - A new cli application

USAGE:
   action [global options]

VERSION:
   1

GLOBAL OPTIONS:
   -i value       An integer (default: 22)
   --help, -h     show help
   --version, -v  print the version
```

</p>
</details>

<details><summary>Example (Version)</summary>
<p>



```go
// Include a Version field in the Command
(&cli.Command{
	Name:    "version",
	Version: "1",
}).Run(context.Background(), os.Args)
// Output:
// NAME:
//    version - A new cli application
//
// USAGE:
//    version [global options]
//
// VERSION:
//    1
//
// GLOBAL OPTIONS:
//    --help, -h     show help
//    --version, -v  print the version
```

#### Output

```
NAME:
   version - A new cli application

USAGE:
   version [global options]

VERSION:
   1

GLOBAL OPTIONS:
   --help, -h     show help
   --version, -v  print the version
```

</p>
</details>

## Index

- [func Run\(ctx context.Context, command \*cli.Command, options ...Option\)](<#Run>)
- [type Configurator](<#Configurator>)
- [type FlagOption](<#FlagOption>)
  - [func DescTag\(tag string\) FlagOption](<#DescTag>)
  - [func EnvDivider\(divider string\) FlagOption](<#EnvDivider>)
  - [func EnvPrefix\(prefix string\) FlagOption](<#EnvPrefix>)
  - [func FlagDivider\(divider string\) FlagOption](<#FlagDivider>)
  - [func FlagTag\(tag string\) FlagOption](<#FlagTag>)
  - [func Flatten\(flatten bool\) FlagOption](<#Flatten>)
  - [func Prefix\(prefix string\) FlagOption](<#Prefix>)
  - [func Validator\(val sflags.ValidateFunc\) FlagOption](<#Validator>)
- [type Option](<#Option>)
  - [func ConfigFlags\(configs \[\]Configurator, command \*cli.Command, ops ...FlagOption\) Option](<#ConfigFlags>)
  - [func Configuration\(config Configurator\) Option](<#Configuration>)
  - [func NoDefaultFlags\(\) Option](<#NoDefaultFlags>)
  - [func NoJSON\(\) Option](<#NoJSON>)
  - [func NoLog\(\) Option](<#NoLog>)
  - [func NoTrace\(\) Option](<#NoTrace>)
  - [func NoVerbose\(\) Option](<#NoVerbose>)


<a name="Run"></a>
## func [Run](<https://github.com/bruceesmith/echidna/blob/main/program/program.go#L401>)

```go
func Run(ctx context.Context, command *cli.Command, options ...Option)
```

Run is the primary external function of this library. It augments the cli.Command with default command\-line flags, hooks in handling for processing a configuration, runs the appropriate Action, calls the terminator to wait for goroutine cleanup

<a name="Configurator"></a>
## type [Configurator](<https://github.com/bruceesmith/echidna/blob/main/program/program.go#L38-L40>)

Configurator is the interface for a configuration struct

```go
type Configurator interface {
    Validate() error
}
```

<a name="FlagOption"></a>
## type [FlagOption](<https://github.com/bruceesmith/echidna/blob/main/program/config_flags.go#L43>)

FlagOption is a functional option parameter for the ConfigFlags function

```go
type FlagOption func()
```

<a name="DescTag"></a>
### func [DescTag](<https://github.com/bruceesmith/echidna/blob/main/program/config_flags.go#L66>)

```go
func DescTag(tag string) FlagOption
```

DescTag sets the struct tag where usage text is configured

<a name="EnvDivider"></a>
### func [EnvDivider](<https://github.com/bruceesmith/echidna/blob/main/program/config_flags.go#L74>)

```go
func EnvDivider(divider string) FlagOption
```

EnvDivider is the character in between parts of an environment variable bound to a command line struct\-bound flag

<a name="EnvPrefix"></a>
### func [EnvPrefix](<https://github.com/bruceesmith/echidna/blob/main/program/config_flags.go#L82>)

```go
func EnvPrefix(prefix string) FlagOption
```

EnvPrefix is an optional prefix for an environment variable bound to a command line struct\-bound flag

<a name="FlagDivider"></a>
### func [FlagDivider](<https://github.com/bruceesmith/echidna/blob/main/program/config_flags.go#L90>)

```go
func FlagDivider(divider string) FlagOption
```

FlagDivider is the character in between parts of a struct\-bound command line flag's name

<a name="FlagTag"></a>
### func [FlagTag](<https://github.com/bruceesmith/echidna/blob/main/program/config_flags.go#L98>)

```go
func FlagTag(tag string) FlagOption
```

FlagTag is the struct tag used to configure struct\-bound command line flags

<a name="Flatten"></a>
### func [Flatten](<https://github.com/bruceesmith/echidna/blob/main/program/config_flags.go#L106>)

```go
func Flatten(flatten bool) FlagOption
```

Flatten determines the name of a command line flag bound to a an anonymous struct field

<a name="Prefix"></a>
### func [Prefix](<https://github.com/bruceesmith/echidna/blob/main/program/config_flags.go#L114>)

```go
func Prefix(prefix string) FlagOption
```

Prefix is an optional prefix for the names of all struct\-bound command line flags

<a name="Validator"></a>
### func [Validator](<https://github.com/bruceesmith/echidna/blob/main/program/config_flags.go#L122>)

```go
func Validator(val sflags.ValidateFunc) FlagOption
```

Validator is an optional function that will be called to to validate each struct\-field bound flag

<a name="Option"></a>
## type [Option](<https://github.com/bruceesmith/echidna/blob/main/program/program.go#L50>)

Option is a functional parameter for Run\(\)

```go
type Option func(params ...any) error
```

<a name="ConfigFlags"></a>
### func [ConfigFlags](<https://github.com/bruceesmith/echidna/blob/main/program/config_flags.go#L131>)

```go
func ConfigFlags(configs []Configurator, command *cli.Command, ops ...FlagOption) Option
```

ConfigFlags creates and configures [program.Run](<#Run>) to have command line flags bound to the fields of one or more parts of a configuration struct

<a name="Configuration"></a>
### func [Configuration](<https://github.com/bruceesmith/echidna/blob/main/program/program.go#L225>)

```go
func Configuration(config Configurator) Option
```

Configuration is an Option helper to define a configuration structure that will be populated from the sources given on a \-\-config command\-line flag

<a name="NoDefaultFlags"></a>
### func [NoDefaultFlags](<https://github.com/bruceesmith/echidna/blob/main/program/program.go#L443>)

```go
func NoDefaultFlags() Option
```

NoDefaultFlags is a convenience function which is equivalent to calling all of NoJSON, NoLog, NoTrace, and NoVerbose

<a name="NoJSON"></a>
### func [NoJSON](<https://github.com/bruceesmith/echidna/blob/main/program/program.go#L452>)

```go
func NoJSON() Option
```



<a name="NoLog"></a>
### func [NoLog](<https://github.com/bruceesmith/echidna/blob/main/program/program.go#L459>)

```go
func NoLog() Option
```



<a name="NoTrace"></a>
### func [NoTrace](<https://github.com/bruceesmith/echidna/blob/main/program/program.go#L466>)

```go
func NoTrace() Option
```



<a name="NoVerbose"></a>
### func [NoVerbose](<https://github.com/bruceesmith/echidna/blob/main/program/program.go#L473>)

```go
func NoVerbose() Option
```



# <a name="set">5. set</a>

```go
import "github.com/bruceesmith/echidna/set"
```

Package set is based on public code from John Arundel, goroutine safety added. It defines goroutine\-safe methods for manipulating a generic set data structure via the standard operations Add, Contains, Intersection, Members, String and Union

URL: https://bitfieldconsulting.com/posts/generic-set

## Index

- [type Set](<#Set>)
  - [func New\[E comparable\]\(vals ...E\) \*Set\[E\]](<#New>)
  - [func \(s \*Set\[E\]\) Add\(vals ...E\)](<#Set[E].Add>)
  - [func \(s \*Set\[E\]\) Clear\(\)](<#Set[E].Clear>)
  - [func \(s \*Set\[E\]\) Contains\(v E\) bool](<#Set[E].Contains>)
  - [func \(s \*Set\[E\]\) Delete\(vals ...E\)](<#Set[E].Delete>)
  - [func \(s \*Set\[E\]\) Difference\(s2 \*Set\[E\]\) \*Set\[E\]](<#Set[E].Difference>)
  - [func \(s \*Set\[E\]\) Disjoint\(s2 \*Set\[E\]\) bool](<#Set[E].Disjoint>)
  - [func \(s \*Set\[E\]\) Empty\(\) bool](<#Set[E].Empty>)
  - [func \(s \*Set\[E\]\) Intersection\(s2 \*Set\[E\]\) \*Set\[E\]](<#Set[E].Intersection>)
  - [func \(s \*Set\[E\]\) Members\(\) \[\]E](<#Set[E].Members>)
  - [func \(s \*Set\[E\]\) Size\(\) int](<#Set[E].Size>)
  - [func \(s \*Set\[E\]\) String\(\) string](<#Set[E].String>)
  - [func \(s \*Set\[E\]\) Union\(s2 \*Set\[E\]\) \*Set\[E\]](<#Set[E].Union>)


<a name="Set"></a>
## type [Set](<https://github.com/bruceesmith/echidna/blob/main/set/set.go#L20-L23>)

Set is a generics implementation of the set data type

```go
type Set[E comparable] struct {
    // contains filtered or unexported fields
}
```

<a name="New"></a>
### func [New](<https://github.com/bruceesmith/echidna/blob/main/set/set.go#L26>)

```go
func New[E comparable](vals ...E) *Set[E]
```

New creates a new Set

<a name="Set[E].Add"></a>
### func \(\*Set\[E\]\) [Add](<https://github.com/bruceesmith/echidna/blob/main/set/set.go#L37>)

```go
func (s *Set[E]) Add(vals ...E)
```

Add puts a new value into a Set

<a name="Set[E].Clear"></a>
### func \(\*Set\[E\]\) [Clear](<https://github.com/bruceesmith/echidna/blob/main/set/set.go#L46>)

```go
func (s *Set[E]) Clear()
```

Clear removes all values from a Set

<a name="Set[E].Contains"></a>
### func \(\*Set\[E\]\) [Contains](<https://github.com/bruceesmith/echidna/blob/main/set/set.go#L53>)

```go
func (s *Set[E]) Contains(v E) bool
```

Contains checks if a value is in the Set

<a name="Set[E].Delete"></a>
### func \(\*Set\[E\]\) [Delete](<https://github.com/bruceesmith/echidna/blob/main/set/set.go#L61>)

```go
func (s *Set[E]) Delete(vals ...E)
```

Delete remove values\(s\) from a Set

<a name="Set[E].Difference"></a>
### func \(\*Set\[E\]\) [Difference](<https://github.com/bruceesmith/echidna/blob/main/set/set.go#L70>)

```go
func (s *Set[E]) Difference(s2 *Set[E]) *Set[E]
```

Difference returns the set of values that are in s \(set A\) but not in s2 \(set B\) ... i.e. A \- B

<a name="Set[E].Disjoint"></a>
### func \(\*Set\[E\]\) [Disjoint](<https://github.com/bruceesmith/echidna/blob/main/set/set.go#L85>)

```go
func (s *Set[E]) Disjoint(s2 *Set[E]) bool
```

Disjoint returns true if the intersection of s with another set s2 is empty

<a name="Set[E].Empty"></a>
### func \(\*Set\[E\]\) [Empty](<https://github.com/bruceesmith/echidna/blob/main/set/set.go#L94>)

```go
func (s *Set[E]) Empty() bool
```

Empty returns true if the Set is empty

<a name="Set[E].Intersection"></a>
### func \(\*Set\[E\]\) [Intersection](<https://github.com/bruceesmith/echidna/blob/main/set/set.go#L101>)

```go
func (s *Set[E]) Intersection(s2 *Set[E]) *Set[E]
```

Intersection returns the logical intersection of 2 Sets

<a name="Set[E].Members"></a>
### func \(\*Set\[E\]\) [Members](<https://github.com/bruceesmith/echidna/blob/main/set/set.go#L116>)

```go
func (s *Set[E]) Members() []E
```

Members returns a slice of the values in a Set

<a name="Set[E].Size"></a>
### func \(\*Set\[E\]\) [Size](<https://github.com/bruceesmith/echidna/blob/main/set/set.go#L127>)

```go
func (s *Set[E]) Size() int
```

Size returns the number of values in a Set

<a name="Set[E].String"></a>
### func \(\*Set\[E\]\) [String](<https://github.com/bruceesmith/echidna/blob/main/set/set.go#L134>)

```go
func (s *Set[E]) String() string
```

String returns a string representation of the Set members

<a name="Set[E].Union"></a>
### func \(\*Set\[E\]\) [Union](<https://github.com/bruceesmith/echidna/blob/main/set/set.go#L141>)

```go
func (s *Set[E]) Union(s2 *Set[E]) *Set[E]
```

Union returns the logical union of 2 Sets

# <a name="stack">6. stack</a>

```go
import "github.com/bruceesmith/echidna/stack"
```

Package stack defines goroutine\-safe methods for manipulating a generic stack data structure via the standard operations IsEmpty, Peek, Pop, Pushand Size.

## Index

- [type Stack](<#Stack>)
  - [func \(s \*Stack\[T\]\) IsEmpty\(\) bool](<#Stack[T].IsEmpty>)
  - [func \(s \*Stack\[T\]\) Peek\(\) \(value T, ok bool\)](<#Stack[T].Peek>)
  - [func \(s \*Stack\[T\]\) Pop\(\) \(value T, ok bool\)](<#Stack[T].Pop>)
  - [func \(s \*Stack\[T\]\) Push\(v T\)](<#Stack[T].Push>)
  - [func \(s \*Stack\[T\]\) Size\(\) int](<#Stack[T].Size>)


<a name="Stack"></a>
## type [Stack](<https://github.com/bruceesmith/echidna/blob/main/stack/stack.go#L21-L25>)

Stack is a Go stack implementation using a linked list It is go\-routine safe

```go
type Stack[T any] struct {
    // contains filtered or unexported fields
}
```

<a name="Stack[T].IsEmpty"></a>
### func \(\*Stack\[T\]\) [IsEmpty](<https://github.com/bruceesmith/echidna/blob/main/stack/stack.go#L28>)

```go
func (s *Stack[T]) IsEmpty() bool
```

IsEmpty returns true if the stack has no elements

<a name="Stack[T].Peek"></a>
### func \(\*Stack\[T\]\) [Peek](<https://github.com/bruceesmith/echidna/blob/main/stack/stack.go#L36>)

```go
func (s *Stack[T]) Peek() (value T, ok bool)
```

Peek returns a copy of the top element off the stack

<a name="Stack[T].Pop"></a>
### func \(\*Stack\[T\]\) [Pop](<https://github.com/bruceesmith/echidna/blob/main/stack/stack.go#L50>)

```go
func (s *Stack[T]) Pop() (value T, ok bool)
```

Pop removes the top element and returns it

<a name="Stack[T].Push"></a>
### func \(\*Stack\[T\]\) [Push](<https://github.com/bruceesmith/echidna/blob/main/stack/stack.go#L67>)

```go
func (s *Stack[T]) Push(v T)
```

Push adds an element to the top of the stack

<a name="Stack[T].Size"></a>
### func \(\*Stack\[T\]\) [Size](<https://github.com/bruceesmith/echidna/blob/main/stack/stack.go#L81>)

```go
func (s *Stack[T]) Size() int
```

Size returns the number of elements on the stack

# <a name="terminator">7. terminator</a>

```go
import "github.com/bruceesmith/echidna/terminator"
```

Package terminator permits orderly stopping / shutdown of a group of goroutines via methods which mimic stop of a sync.WaitGroup.There is a default Terminator accessible through top level functions \(Add, Done, Wait and so on\) that call the corresponding Terminator methods

## Index

- [func Add\(delta int\)](<#Add>)
- [func Done\(\)](<#Done>)
- [func SetDefault\(t \*Terminator\)](<#SetDefault>)
- [func ShutDown\(\) \<\-chan struct\{\}](<#ShutDown>)
- [func ShuttingDown\(\) bool](<#ShuttingDown>)
- [func Stop\(\)](<#Stop>)
- [func Wait\(\)](<#Wait>)
- [type Terminator](<#Terminator>)
  - [func Default\(\) \*Terminator](<#Default>)
  - [func New\(\) \*Terminator](<#New>)
  - [func \(t \*Terminator\) Add\(delta int\)](<#Terminator.Add>)
  - [func \(t \*Terminator\) Done\(\)](<#Terminator.Done>)
  - [func \(t \*Terminator\) ShutDown\(\) \<\-chan struct\{\}](<#Terminator.ShutDown>)
  - [func \(t \*Terminator\) ShuttingDown\(\) bool](<#Terminator.ShuttingDown>)
  - [func \(t \*Terminator\) Stop\(\)](<#Terminator.Stop>)
  - [func \(t \*Terminator\) Wait\(\)](<#Terminator.Wait>)


<a name="Add"></a>
## func [Add](<https://github.com/bruceesmith/echidna/blob/main/terminator/terminator.go#L48>)

```go
func Add(delta int)
```

Add adds delta to the count of goroutines in the group

<a name="Done"></a>
## func [Done](<https://github.com/bruceesmith/echidna/blob/main/terminator/terminator.go#L56>)

```go
func Done()
```

Done decrements the count of goroutines in the group by one

<a name="SetDefault"></a>
## func [SetDefault](<https://github.com/bruceesmith/echidna/blob/main/terminator/terminator.go#L66>)

```go
func SetDefault(t *Terminator)
```

SetDefault sets the default Terminator

<a name="ShutDown"></a>
## func [ShutDown](<https://github.com/bruceesmith/echidna/blob/main/terminator/terminator.go#L61>)

```go
func ShutDown() <-chan struct{}
```

ShutDown allows code to wait for a shut down signal

<a name="ShuttingDown"></a>
## func [ShuttingDown](<https://github.com/bruceesmith/echidna/blob/main/terminator/terminator.go#L71>)

```go
func ShuttingDown() bool
```

ShuttingDown returns true if shutdown is in progress

<a name="Stop"></a>
## func [Stop](<https://github.com/bruceesmith/echidna/blob/main/terminator/terminator.go#L76>)

```go
func Stop()
```

Stop signals that all goroutines in the group should safely exit

<a name="Wait"></a>
## func [Wait](<https://github.com/bruceesmith/echidna/blob/main/terminator/terminator.go#L82>)

```go
func Wait()
```

Wait blocks until every goroutines in the group has called Done\(\)

<a name="Terminator"></a>
## type [Terminator](<https://github.com/bruceesmith/echidna/blob/main/terminator/terminator.go#L21-L25>)

Terminator manages groups of goroutines

```go
type Terminator struct {
    // contains filtered or unexported fields
}
```

<a name="Default"></a>
### func [Default](<https://github.com/bruceesmith/echidna/blob/main/terminator/terminator.go#L53>)

```go
func Default() *Terminator
```

Default returns the default [Terminator](<#Terminator>).

<a name="New"></a>
### func [New](<https://github.com/bruceesmith/echidna/blob/main/terminator/terminator.go#L87>)

```go
func New() *Terminator
```

New returns a Terminator

<a name="Terminator.Add"></a>
### func \(\*Terminator\) [Add](<https://github.com/bruceesmith/echidna/blob/main/terminator/terminator.go#L94>)

```go
func (t *Terminator) Add(delta int)
```

Add adds delta to the count of goroutines in the group

<a name="Terminator.Done"></a>
### func \(\*Terminator\) [Done](<https://github.com/bruceesmith/echidna/blob/main/terminator/terminator.go#L99>)

```go
func (t *Terminator) Done()
```

Done decrements the count of goroutines in the group by one

<a name="Terminator.ShutDown"></a>
### func \(\*Terminator\) [ShutDown](<https://github.com/bruceesmith/echidna/blob/main/terminator/terminator.go#L104>)

```go
func (t *Terminator) ShutDown() <-chan struct{}
```

ShutDown allows code to wait for a shut down signal

<a name="Terminator.ShuttingDown"></a>
### func \(\*Terminator\) [ShuttingDown](<https://github.com/bruceesmith/echidna/blob/main/terminator/terminator.go#L109>)

```go
func (t *Terminator) ShuttingDown() bool
```

ShuttingDown returns true if shutdown is in Default\(\).progress

<a name="Terminator.Stop"></a>
### func \(\*Terminator\) [Stop](<https://github.com/bruceesmith/echidna/blob/main/terminator/terminator.go#L114>)

```go
func (t *Terminator) Stop()
```

Stop signals that all goroutines in the group should safely exit

<a name="Terminator.Wait"></a>
### func \(\*Terminator\) [Wait](<https://github.com/bruceesmith/echidna/blob/main/terminator/terminator.go#L120>)

```go
func (t *Terminator) Wait()
```

Wait blocks until every goroutines in the group has called Done\(\)

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
